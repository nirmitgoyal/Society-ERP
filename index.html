<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SocietyERP - Admin Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              "50": "#fafafa", "100": "#f5f5f5", "200": "#e5e5e5",
              "300": "#d4d4d4", "400": "#a3a3a3", "500": "#737373",
              "600": "#525252", "700": "#404040", "800": "#262626",
              "900": "#171717", "950": "#0a0a0a"
            }
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-neutral-50">
  <div id="main-container" class="flex h-screen bg-neutral-50">
    <!-- Sidebar Overlay for Mobile -->
    <div id="sidebar-overlay" class="sidebar-overlay" onclick="closeMobileSidebar()"></div>
    
    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 bg-white border-r border-neutral-200 flex flex-col">
      <!-- Logo -->
      <div class="p-6 border-b border-neutral-200">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-neutral-800 rounded-lg flex items-center justify-center">
            <i class="fa-solid fa-building text-white text-lg"></i>
          </div>
          <div>
            <h1 class="text-lg text-neutral-900 font-semibold">SocietyERP</h1>
            <p class="text-xs text-neutral-500">Admin Dashboard</p>
          </div>
        </div>
      </div>

      <!-- Navigation -->
      <nav class="flex-1 overflow-y-auto p-4 hide-scrollbar">
        <div class="space-y-1" id="nav-menu">
          <a href="#dashboard" data-page="dashboard" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-chart-line w-5"></i>
            <span class="text-sm">Dashboard</span>
          </a>

          <div class="pt-4 pb-2">
            <p class="px-3 text-xs text-neutral-500 uppercase tracking-wider">Accounting</p>
          </div>
          <a href="#invoices" data-page="invoices" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-file-invoice-dollar w-5"></i>
            <span class="text-sm">Invoices</span>
          </a>
          <a href="#billing" data-page="billing" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-money-bill-transfer w-5"></i>
            <span class="text-sm">Payments</span>
          </a>
          <a href="#defaulters" data-page="defaulters" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-user-xmark w-5"></i>
            <span class="text-sm">Defaulters</span>
            <span class="ml-auto bg-neutral-100 text-neutral-700 text-xs px-2 py-0.5 rounded-full">8</span>
          </a>
          <a href="#reconciliation" data-page="reconciliation" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-rotate w-5"></i>
            <span class="text-sm">Reconciliation</span>
          </a>
          <a href="#reports" data-page="reports" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-chart-bar w-5"></i>
            <span class="text-sm">Reports</span>
          </a>
          <a href="#audit-logs" data-page="audit-logs" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-file-invoice w-5"></i>
            <span class="text-sm">Audit Logs</span>
          </a>

          <div class="pt-4 pb-2">
            <p class="px-3 text-xs text-neutral-500 uppercase tracking-wider">Operations</p>
          </div>
          <a href="#complaints" data-page="complaints" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-clipboard-list w-5"></i>
            <span class="text-sm">Complaints</span>
            <span class="ml-auto bg-neutral-100 text-neutral-700 text-xs px-2 py-0.5 rounded-full">8</span>
          </a>
          <a href="#vendors" data-page="vendors" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-truck w-5"></i>
            <span class="text-sm">Vendors</span>
          </a>
          <a href="#vendor-workforce" data-page="vendor-workforce" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-users w-5"></i>
            <span class="text-sm">Vendor Workforce</span>
          </a>
          <a href="#attendance" data-page="attendance" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-fingerprint w-5"></i>
            <span class="text-sm">Attendance</span>
          </a>

          <div class="pt-4 pb-2">
            <p class="px-3 text-xs text-neutral-500 uppercase tracking-wider">Management</p>
          </div>
          <a href="#residents" data-page="residents" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-building-user w-5"></i>
            <span class="text-sm">Residents</span>
          </a>
          <a href="#security" data-page="security" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-shield-halved w-5"></i>
            <span class="text-sm">Security Personnels</span>
          </a>
          <a href="#users-roles" data-page="users-roles" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-user-gear w-5"></i>
            <span class="text-sm">Users & Roles</span>
          </a>
          <a href="#settings" data-page="settings" class="nav-link flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-700 hover:bg-neutral-100">
            <i class="fa-solid fa-gear w-5"></i>
            <span class="text-sm">Settings</span>
          </a>
        </div>
      </nav>

      <!-- User Profile -->
      <div class="p-4 border-t border-neutral-200">
        <div class="flex items-center gap-3 px-3 py-2">
          <img src="https://api.dicebear.com/7.x/notionists/svg?scale=200&seed=8547" alt="Admin" class="w-10 h-10 rounded-full bg-neutral-100">
          <div class="flex-1">
            <p class="text-sm text-neutral-900">Rajesh Kumar</p>
            <p class="text-xs text-neutral-500">Head Admin</p>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <div id="main-content" class="flex-1 flex flex-col overflow-hidden">
      <!-- Header -->
      <header id="header" class="bg-white border-b border-neutral-200 px-8 py-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4">
            <!-- Mobile Menu Toggle -->
            <button id="mobile-menu-btn" class="md:hidden p-2 text-neutral-600 hover:bg-neutral-100 rounded-lg" aria-label="Open navigation menu" onclick="toggleMobileSidebar()">
              <i class="fa-solid fa-bars text-xl"></i>
            </button>
            <div>
              <h2 id="page-title" class="text-2xl text-neutral-900">Dashboard Overview</h2>
              <p id="page-subtitle" class="text-sm text-neutral-500 mt-1">Welcome back! Here's what's happening today.</p>
            </div>
          </div>
          <div class="flex items-center gap-4">
            <!-- Language Dropdown -->
            <div class="relative" id="language-container">
              <button id="language-btn" class="flex items-center gap-2 px-3 py-2 text-neutral-600 hover:bg-neutral-100 rounded-lg border border-neutral-200" aria-label="Select language">
                <i class="fa-solid fa-globe text-sm"></i>
                <span class="text-sm" id="current-language">English</span>
                <i class="fa-solid fa-chevron-down text-xs"></i>
              </button>
              
              <!-- Language Dropdown Menu -->
              <div id="language-dropdown" class="hidden absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-lg border border-neutral-200 z-50 overflow-hidden">
                <div class="py-1">
                  <button class="w-full px-4 py-2.5 text-left text-sm text-neutral-900 hover:bg-neutral-100 flex items-center gap-2 language-option active" data-lang="en">
                    <span>English</span>
                    <i class="fa-solid fa-check ml-auto text-neutral-900 text-xs"></i>
                  </button>
                  <button class="w-full px-4 py-2.5 text-left text-sm text-neutral-400 hover:bg-neutral-50 flex items-center gap-2 language-option cursor-not-allowed" data-lang="hi" disabled>
                    <span>हिन्दी (Hindi)</span>
                    <span class="ml-auto text-xs bg-neutral-100 text-neutral-500 px-2 py-0.5 rounded-full">Coming Soon</span>
                  </button>
                </div>
              </div>
            </div>

            <!-- Demo Mode Badge -->
            <div class="hidden sm:flex items-center gap-2 px-3 py-1.5 bg-amber-50 border border-amber-200 rounded-lg" title="This is a static demo. Interactive features are not functional.">
              <i class="fa-solid fa-flask text-amber-600 text-sm"></i>
              <span class="text-xs text-amber-700 font-medium">Demo Mode</span>
            </div>
            <div class="relative">
              <i class="fa-solid fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400"></i>
              <input type="text" id="search-input" placeholder="Search..." class="pl-10 pr-4 py-2 text-xs border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent w-96" disabled title="Search is not available in demo mode">
            </div>
            <!-- Notification Bell with Dropdown -->
            <div class="relative" id="notification-container">
              <button id="notification-btn" class="relative p-2 text-neutral-600 hover:bg-neutral-100 rounded-lg" aria-label="View notifications">
                <i class="fa-regular fa-bell text-xl"></i>
                <span id="notification-badge" class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
              </button>
              
              <!-- Notification Dropdown -->
              <div id="notification-dropdown" class="hidden absolute right-0 top-full mt-2 w-96 bg-white rounded-xl shadow-lg border border-neutral-200 z-50 overflow-hidden">
                <!-- Header -->
                <div class="px-4 py-3 border-b border-neutral-200 flex items-center justify-between bg-neutral-50">
                  <h3 class="font-semibold text-neutral-900">Notifications</h3>
                  <span class="text-xs bg-red-100 text-red-600 px-2 py-1 rounded-full">5 New</span>
                </div>
                
                <!-- Notification Items -->
                <div class="max-h-96 overflow-y-auto">
                  <!-- Notification 1 - Payment -->
                  <div class="px-4 py-3 hover:bg-neutral-50 border-b border-neutral-100 cursor-pointer">
                    <div class="flex gap-3">
                      <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0">
                        <i class="fa-solid fa-indian-rupee-sign text-green-600"></i>
                      </div>
                      <div class="flex-1">
                        <p class="text-sm text-neutral-900 font-medium">Payment Received</p>
                        <p class="text-xs text-neutral-500 mt-0.5">Unit A-1204 paid ₹8,500 for December maintenance</p>
                        <p class="text-xs text-neutral-400 mt-1">2 minutes ago</p>
                      </div>
                      <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                    </div>
                  </div>
                  
                  <!-- Notification 2 - Complaint -->
                  <div class="px-4 py-3 hover:bg-neutral-50 border-b border-neutral-100 cursor-pointer">
                    <div class="flex gap-3">
                      <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0">
                        <i class="fa-solid fa-clipboard-list text-orange-600"></i>
                      </div>
                      <div class="flex-1">
                        <p class="text-sm text-neutral-900 font-medium">New Complaint Registered</p>
                        <p class="text-xs text-neutral-500 mt-0.5">Water leakage issue reported by Unit B-503</p>
                        <p class="text-xs text-neutral-400 mt-1">15 minutes ago</p>
                      </div>
                      <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                    </div>
                  </div>
                  
                  <!-- Notification 3 - Security Alert -->
                  <div class="px-4 py-3 hover:bg-neutral-50 border-b border-neutral-100 cursor-pointer">
                    <div class="flex gap-3">
                      <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0">
                        <i class="fa-solid fa-shield-halved text-red-600"></i>
                      </div>
                      <div class="flex-1">
                        <p class="text-sm text-neutral-900 font-medium">Security Alert</p>
                        <p class="text-xs text-neutral-500 mt-0.5">Unauthorized vehicle detected at Gate 2</p>
                        <p class="text-xs text-neutral-400 mt-1">32 minutes ago</p>
                      </div>
                      <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                    </div>
                  </div>
                  
                  <!-- Notification 4 - Vendor -->
                  <div class="px-4 py-3 hover:bg-neutral-50 border-b border-neutral-100 cursor-pointer">
                    <div class="flex gap-3">
                      <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0">
                        <i class="fa-solid fa-truck text-purple-600"></i>
                      </div>
                      <div class="flex-1">
                        <p class="text-sm text-neutral-900 font-medium">Vendor Contract Expiring</p>
                        <p class="text-xs text-neutral-500 mt-0.5">CleanPro Services contract expires in 7 days</p>
                        <p class="text-xs text-neutral-400 mt-1">1 hour ago</p>
                      </div>
                      <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                    </div>
                  </div>
                  
                  <!-- Notification 5 - Defaulter -->
                  <div class="px-4 py-3 hover:bg-neutral-50 border-b border-neutral-100 cursor-pointer">
                    <div class="flex gap-3">
                      <div class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0">
                        <i class="fa-solid fa-user-xmark text-yellow-600"></i>
                      </div>
                      <div class="flex-1">
                        <p class="text-sm text-neutral-900 font-medium">Payment Overdue Reminder</p>
                        <p class="text-xs text-neutral-500 mt-0.5">3 units have crossed 30-day payment deadline</p>
                        <p class="text-xs text-neutral-400 mt-1">2 hours ago</p>
                      </div>
                      <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                    </div>
                  </div>
                  
                  <!-- Notification 6 - Attendance -->
                  <div class="px-4 py-3 hover:bg-neutral-50 cursor-pointer">
                    <div class="flex gap-3">
                      <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
                        <i class="fa-solid fa-fingerprint text-blue-600"></i>
                      </div>
                      <div class="flex-1">
                        <p class="text-sm text-neutral-900 font-medium">Attendance Report Ready</p>
                        <p class="text-xs text-neutral-500 mt-0.5">Weekly staff attendance report is now available</p>
                        <p class="text-xs text-neutral-400 mt-1">3 hours ago</p>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Footer -->
                <div class="px-4 py-3 border-t border-neutral-200 bg-neutral-50">
                  <button class="w-full text-center text-sm text-neutral-600 hover:text-neutral-900 font-medium">
                    View All Notifications
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Dynamic Content Area -->
      <main id="app" class="flex-1 overflow-y-auto bg-neutral-50 p-8">
        <div class="flex items-center justify-center h-full">
          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-neutral-900"></div>
        </div>
      </main>
    </div>
  </div>

  <!-- Create Invoice Modal -->
  <div id="create-invoice-modal" class="modal-overlay" onclick="closeCreateInvoiceModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <!-- Modal Header -->
      <div class="px-6 py-4 border-b border-neutral-200 flex items-center justify-between">
        <div>
          <h3 class="text-lg text-neutral-900 font-semibold">Create New Invoice</h3>
          <p class="text-sm text-neutral-500 mt-1">Generate a new invoice for a resident</p>
        </div>
        <button onclick="closeCreateInvoiceModal()" class="p-2 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 rounded-lg transition-colors">
          <i class="fa-solid fa-xmark text-xl"></i>
        </button>
      </div>
      
      <!-- Modal Body -->
      <div class="p-6 space-y-6">
        <!-- Resident Selection -->
        <div>
          <label class="block text-sm text-neutral-700 mb-2 font-medium">Select Resident <span class="text-red-500">*</span></label>
          <select id="invoice-resident" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent">
            <option value="">Choose a resident...</option>
            <option value="F-101">F-101 - Asha Verma</option>
            <option value="F-102">F-102 - Sunil Rao</option>
            <option value="F-205">F-205 - Meera Patel</option>
            <option value="F-310">F-310 - Rajesh Kumar</option>
            <option value="F-412">F-412 - Priya Singh</option>
            <option value="A-304">A-304 - Amit Sharma</option>
            <option value="B-102">B-102 - Priya Patel</option>
            <option value="C-205">C-205 - Rahul Verma</option>
          </select>
        </div>

        <!-- Bill Type -->
        <div>
          <label class="block text-sm text-neutral-700 mb-2 font-medium">Bill Type <span class="text-red-500">*</span></label>
          <div class="grid grid-cols-3 gap-3">
            <label class="relative">
              <input type="radio" name="bill-type" value="maintenance" class="peer sr-only" checked>
              <div class="flex items-center justify-center gap-2 px-4 py-3 border-2 border-neutral-200 rounded-lg cursor-pointer peer-checked:border-neutral-900 peer-checked:bg-neutral-50 hover:border-neutral-300 transition-colors">
                <i class="fa-solid fa-wrench text-neutral-600"></i>
                <span class="text-sm text-neutral-700">Maintenance</span>
              </div>
            </label>
            <label class="relative">
              <input type="radio" name="bill-type" value="electricity" class="peer sr-only">
              <div class="flex items-center justify-center gap-2 px-4 py-3 border-2 border-neutral-200 rounded-lg cursor-pointer peer-checked:border-neutral-900 peer-checked:bg-neutral-50 hover:border-neutral-300 transition-colors">
                <i class="fa-solid fa-bolt text-neutral-600"></i>
                <span class="text-sm text-neutral-700">Electricity</span>
              </div>
            </label>
            <label class="relative">
              <input type="radio" name="bill-type" value="water" class="peer sr-only">
              <div class="flex items-center justify-center gap-2 px-4 py-3 border-2 border-neutral-200 rounded-lg cursor-pointer peer-checked:border-neutral-900 peer-checked:bg-neutral-50 hover:border-neutral-300 transition-colors">
                <i class="fa-solid fa-droplet text-neutral-600"></i>
                <span class="text-sm text-neutral-700">Water</span>
              </div>
            </label>
          </div>
        </div>

        <!-- Billing Period -->
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-neutral-700 mb-2 font-medium">Billing Period <span class="text-red-500">*</span></label>
            <select id="invoice-period" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent">
              <option value="Dec 2025">December 2025</option>
              <option value="Nov 2025">November 2025</option>
              <option value="Oct 2025">October 2025</option>
              <option value="Sep 2025">September 2025</option>
            </select>
          </div>
          <div>
            <label class="block text-sm text-neutral-700 mb-2 font-medium">Due Date <span class="text-red-500">*</span></label>
            <input type="date" id="invoice-due-date" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent" value="2025-12-31">
          </div>
        </div>

        <!-- Amount -->
        <div>
          <label class="block text-sm text-neutral-700 mb-2 font-medium">Amount (₹) <span class="text-red-500">*</span></label>
          <div class="relative">
            <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-500">₹</span>
            <input type="number" id="invoice-amount" placeholder="0.00" class="w-full pl-8 pr-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent" min="0" step="0.01">
          </div>
        </div>

        <!-- Description -->
        <div>
          <label class="block text-sm text-neutral-700 mb-2 font-medium">Description</label>
          <textarea id="invoice-description" rows="3" placeholder="Add any additional notes or description..." class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent resize-none"></textarea>
        </div>

        <!-- Send Options -->
        <div class="bg-neutral-50 rounded-lg p-4">
          <div class="flex items-center gap-3">
            <input type="checkbox" id="send-email" class="w-4 h-4 border-neutral-300 rounded text-neutral-900 focus:ring-neutral-900" checked>
            <label for="send-email" class="text-sm text-neutral-700">Send invoice notification via email</label>
          </div>
          <div class="flex items-center gap-3 mt-3">
            <input type="checkbox" id="send-sms" class="w-4 h-4 border-neutral-300 rounded text-neutral-900 focus:ring-neutral-900">
            <label for="send-sms" class="text-sm text-neutral-700">Send SMS reminder</label>
          </div>
        </div>
      </div>
      
      <!-- Modal Footer -->
      <div class="px-6 py-4 border-t border-neutral-200 flex items-center justify-end gap-3 bg-neutral-50">
        <button onclick="closeCreateInvoiceModal()" class="px-5 py-2.5 border border-neutral-300 rounded-lg text-sm text-neutral-700 hover:bg-neutral-100 transition-colors">
          Cancel
        </button>
        <button onclick="createInvoice()" class="px-5 py-2.5 bg-neutral-900 text-white rounded-lg text-sm hover:bg-neutral-800 transition-colors flex items-center gap-2">
          <i class="fa-solid fa-plus"></i>
          <span>Create Invoice</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Create Resident Modal -->
  <div id="create-resident-modal" class="modal-overlay" onclick="closeCreateResidentModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <!-- Modal Header -->
      <div class="px-6 py-4 border-b border-neutral-200 flex items-center justify-between">
        <div>
          <h3 class="text-lg text-neutral-900 font-semibold">Create New Resident</h3>
          <p class="text-sm text-neutral-500 mt-1">Add a new resident to the society directory</p>
        </div>
        <button onclick="closeCreateResidentModal()" class="p-2 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 rounded-lg transition-colors">
          <i class="fa-solid fa-xmark text-xl"></i>
        </button>
      </div>
      
      <!-- Modal Body -->
      <div class="p-6 space-y-6">
        <!-- Personal Information Section -->
        <div>
          <h4 class="text-sm font-semibold text-neutral-900 mb-4 flex items-center gap-2">
            <i class="fa-solid fa-user text-neutral-600"></i>
            Personal Information
          </h4>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Full Name <span class="text-red-500">*</span></label>
              <input type="text" id="resident-name" placeholder="Enter full name" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent">
            </div>
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Email Address <span class="text-red-500">*</span></label>
              <input type="email" id="resident-email" placeholder="email@example.com" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent">
            </div>
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Phone Number <span class="text-red-500">*</span></label>
              <div class="relative">
                <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-500">+91</span>
                <input type="tel" id="resident-phone" placeholder="9876543210" class="w-full pl-12 pr-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent" maxlength="10">
              </div>
            </div>
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Alternate Phone</label>
              <div class="relative">
                <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-500">+91</span>
                <input type="tel" id="resident-alt-phone" placeholder="9876543210" class="w-full pl-12 pr-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent" maxlength="10">
              </div>
            </div>
          </div>
        </div>

        <!-- Unit Information Section -->
        <div>
          <h4 class="text-sm font-semibold text-neutral-900 mb-4 flex items-center gap-2">
            <i class="fa-solid fa-building text-neutral-600"></i>
            Unit Information
          </h4>
          <div class="grid grid-cols-3 gap-4">
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Tower <span class="text-red-500">*</span></label>
              <select id="resident-tower" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent">
                <option value="">Select Tower</option>
                <option value="A">Tower A</option>
                <option value="B">Tower B</option>
                <option value="C">Tower C</option>
                <option value="D">Tower D</option>
              </select>
            </div>
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Floor <span class="text-red-500">*</span></label>
              <select id="resident-floor" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent">
                <option value="">Select Floor</option>
                <option value="G">Ground Floor</option>
                <option value="1">1st Floor</option>
                <option value="2">2nd Floor</option>
                <option value="3">3rd Floor</option>
                <option value="4">4th Floor</option>
                <option value="5">5th Floor</option>
              </select>
            </div>
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Flat Number <span class="text-red-500">*</span></label>
              <input type="text" id="resident-flat" placeholder="e.g., 101" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent">
            </div>
          </div>
        </div>

        <!-- Ownership Details Section -->
        <div>
          <h4 class="text-sm font-semibold text-neutral-900 mb-4 flex items-center gap-2">
            <i class="fa-solid fa-key text-neutral-600"></i>
            Ownership Details
          </h4>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Ownership Type <span class="text-red-500">*</span></label>
              <div class="grid grid-cols-2 gap-3">
                <label class="relative">
                  <input type="radio" name="ownership-type" value="owner" class="peer sr-only" checked>
                  <div class="flex items-center justify-center gap-2 px-4 py-3 border-2 border-neutral-200 rounded-lg cursor-pointer peer-checked:border-neutral-900 peer-checked:bg-neutral-50 hover:border-neutral-300 transition-colors">
                    <i class="fa-solid fa-house-user text-neutral-600"></i>
                    <span class="text-sm text-neutral-700">Owner</span>
                  </div>
                </label>
                <label class="relative">
                  <input type="radio" name="ownership-type" value="tenant" class="peer sr-only">
                  <div class="flex items-center justify-center gap-2 px-4 py-3 border-2 border-neutral-200 rounded-lg cursor-pointer peer-checked:border-neutral-900 peer-checked:bg-neutral-50 hover:border-neutral-300 transition-colors">
                    <i class="fa-solid fa-file-contract text-neutral-600"></i>
                    <span class="text-sm text-neutral-700">Tenant</span>
                  </div>
                </label>
              </div>
            </div>
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Move-in Date <span class="text-red-500">*</span></label>
              <input type="date" id="resident-move-in" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent">
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4 mt-4">
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Unit Share %</label>
              <div class="relative">
                <input type="number" id="resident-share" placeholder="1.25" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent" min="0" max="100" step="0.01">
                <span class="absolute right-4 top-1/2 transform -translate-y-1/2 text-neutral-500">%</span>
              </div>
            </div>
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Parking Slot</label>
              <input type="text" id="resident-parking" placeholder="e.g., P-A101" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent">
            </div>
          </div>
        </div>

        <!-- SAP Integration Section -->
        <div class="bg-neutral-50 rounded-lg p-4">
          <h4 class="text-sm font-semibold text-neutral-900 mb-4 flex items-center gap-2">
            <i class="fa-solid fa-link text-neutral-600"></i>
            SAP Integration (Optional)
          </h4>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">SAP Customer ID</label>
              <input type="text" id="resident-sap-id" placeholder="AR-XXXXXXX" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent bg-white">
            </div>
            <div>
              <label class="block text-sm text-neutral-700 mb-2 font-medium">Virtual Account</label>
              <input type="text" id="resident-virtual-account" placeholder="VA-GNW-XXX" class="w-full px-4 py-3 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-neutral-900 focus:border-transparent bg-white">
            </div>
          </div>
          <div class="flex items-center gap-3 mt-4">
            <input type="checkbox" id="auto-generate-sap" class="w-4 h-4 border-neutral-300 rounded text-neutral-900 focus:ring-neutral-900" checked>
            <label for="auto-generate-sap" class="text-sm text-neutral-700">Auto-generate SAP Customer ID and Virtual Account</label>
          </div>
        </div>

        <!-- Notification Preferences -->
        <div class="bg-neutral-50 rounded-lg p-4">
          <h4 class="text-sm font-semibold text-neutral-900 mb-3">Notification Preferences</h4>
          <div class="flex items-center gap-6">
            <div class="flex items-center gap-3">
              <input type="checkbox" id="notify-email" class="w-4 h-4 border-neutral-300 rounded text-neutral-900 focus:ring-neutral-900" checked>
              <label for="notify-email" class="text-sm text-neutral-700">Email notifications</label>
            </div>
            <div class="flex items-center gap-3">
              <input type="checkbox" id="notify-sms" class="w-4 h-4 border-neutral-300 rounded text-neutral-900 focus:ring-neutral-900" checked>
              <label for="notify-sms" class="text-sm text-neutral-700">SMS notifications</label>
            </div>
            <div class="flex items-center gap-3">
              <input type="checkbox" id="notify-whatsapp" class="w-4 h-4 border-neutral-300 rounded text-neutral-900 focus:ring-neutral-900">
              <label for="notify-whatsapp" class="text-sm text-neutral-700">WhatsApp notifications</label>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Modal Footer -->
      <div class="px-6 py-4 border-t border-neutral-200 flex items-center justify-between bg-neutral-50">
        <div class="flex items-center gap-2 text-sm text-neutral-500">
          <i class="fa-solid fa-circle-info"></i>
          <span>Fields marked with <span class="text-red-500">*</span> are required</span>
        </div>
        <div class="flex items-center gap-3">
          <button onclick="closeCreateResidentModal()" class="px-5 py-2.5 border border-neutral-300 rounded-lg text-sm text-neutral-700 hover:bg-neutral-100 transition-colors">
            Cancel
          </button>
          <button onclick="createResident()" class="px-5 py-2.5 bg-neutral-900 text-white rounded-lg text-sm hover:bg-neutral-800 transition-colors flex items-center gap-2">
            <i class="fa-solid fa-user-plus"></i>
            <span>Create Resident</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="js/pages.js?v=20251218"></script>
  <script src="js/router.js?v=20251218"></script>
  <script>
    // Create Resident Modal Functions
    function openCreateResidentModal() {
      const modal = document.getElementById('create-resident-modal');
      modal.classList.add('show');
      document.body.style.overflow = 'hidden';
      // Set default move-in date to today
      document.getElementById('resident-move-in').valueAsDate = new Date();
    }
    
    function closeCreateResidentModal(event) {
      if (event && event.target !== event.currentTarget) return;
      const modal = document.getElementById('create-resident-modal');
      modal.classList.remove('show');
      document.body.style.overflow = '';
      // Reset form
      resetResidentForm();
    }
    
    function resetResidentForm() {
      document.getElementById('resident-name').value = '';
      document.getElementById('resident-email').value = '';
      document.getElementById('resident-phone').value = '';
      document.getElementById('resident-alt-phone').value = '';
      document.getElementById('resident-tower').value = '';
      document.getElementById('resident-floor').value = '';
      document.getElementById('resident-flat').value = '';
      document.getElementById('resident-move-in').value = '';
      document.getElementById('resident-share').value = '';
      document.getElementById('resident-parking').value = '';
      document.getElementById('resident-sap-id').value = '';
      document.getElementById('resident-virtual-account').value = '';
      document.querySelectorAll('input[name="ownership-type"]')[0].checked = true;
      document.getElementById('auto-generate-sap').checked = true;
      document.getElementById('notify-email').checked = true;
      document.getElementById('notify-sms').checked = true;
      document.getElementById('notify-whatsapp').checked = false;
    }
    
    function createResident() {
      const name = document.getElementById('resident-name').value.trim();
      const email = document.getElementById('resident-email').value.trim();
      const phone = document.getElementById('resident-phone').value.trim();
      const tower = document.getElementById('resident-tower').value;
      const floor = document.getElementById('resident-floor').value;
      const flat = document.getElementById('resident-flat').value.trim();
      const ownershipType = document.querySelector('input[name="ownership-type"]:checked')?.value;
      const moveInDate = document.getElementById('resident-move-in').value;
      
      // Validation
      if (!name || !email || !phone || !tower || !floor || !flat || !moveInDate) {
        alert('Please fill in all required fields');
        return;
      }
      
      // Email validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Please enter a valid email address');
        return;
      }
      
      // Phone validation
      if (phone.length !== 10 || !/^\d+$/.test(phone)) {
        alert('Please enter a valid 10-digit phone number');
        return;
      }
      
      // Generate flat ID
      const flatId = `${tower}-${floor}${flat}`;
      
      // Demo mode - just show success message
      alert(`Resident created successfully!\n\nFlat ID: ${flatId}\nName: ${name}\nEmail: ${email}\nPhone: +91 ${phone}\nOwnership: ${ownershipType === 'owner' ? 'Owner Occupied' : 'Tenant'}\nMove-in Date: ${moveInDate}\n\n(This is a demo - no actual resident was created)`);
      closeCreateResidentModal();
    }

    // Create Invoice Modal Functions
    function openCreateInvoiceModal() {
      const modal = document.getElementById('create-invoice-modal');
      modal.classList.add('show');
      document.body.style.overflow = 'hidden';
    }
    
    function closeCreateInvoiceModal(event) {
      if (event && event.target !== event.currentTarget) return;
      const modal = document.getElementById('create-invoice-modal');
      modal.classList.remove('show');
      document.body.style.overflow = '';
      // Reset form
      document.getElementById('invoice-resident').value = '';
      document.getElementById('invoice-amount').value = '';
      document.getElementById('invoice-description').value = '';
      document.querySelectorAll('input[name="bill-type"]')[0].checked = true;
    }
    
    function createInvoice() {
      const resident = document.getElementById('invoice-resident').value;
      const billType = document.querySelector('input[name="bill-type"]:checked')?.value;
      const period = document.getElementById('invoice-period').value;
      const dueDate = document.getElementById('invoice-due-date').value;
      const amount = document.getElementById('invoice-amount').value;
      
      if (!resident || !amount) {
        alert('Please fill in all required fields');
        return;
      }
      
      // Demo mode - just show success message
      alert(`Invoice created successfully!\n\nResident: ${resident}\nBill Type: ${billType}\nPeriod: ${period}\nAmount: ₹${amount}\n\n(This is a demo - no actual invoice was created)`);
      closeCreateInvoiceModal();
    }
    
    // Close modal on Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        const invoiceModal = document.getElementById('create-invoice-modal');
        const residentModal = document.getElementById('create-resident-modal');
        if (invoiceModal.classList.contains('show')) {
          closeCreateInvoiceModal();
        }
        if (residentModal.classList.contains('show')) {
          closeCreateResidentModal();
        }
      }
    });
    // Mobile sidebar functions
    function toggleMobileSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      sidebar.classList.toggle('open');
      overlay.classList.toggle('show');
    }
    
    function closeMobileSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      sidebar.classList.remove('open');
      overlay.classList.remove('show');
    }

    // Notification dropdown toggle
    document.addEventListener('DOMContentLoaded', function() {
      const notificationBtn = document.getElementById('notification-btn');
      const notificationDropdown = document.getElementById('notification-dropdown');
      const notificationContainer = document.getElementById('notification-container');
      
      // Language dropdown elements
      const languageBtn = document.getElementById('language-btn');
      const languageDropdown = document.getElementById('language-dropdown');
      const languageContainer = document.getElementById('language-container');
      
      // Toggle dropdown on button click
      notificationBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        notificationDropdown.classList.toggle('hidden');
        languageDropdown.classList.add('hidden'); // Close language dropdown
        
        if (!notificationDropdown.classList.contains('hidden')) {
          notificationDropdown.style.animation = 'fadeIn 0.2s ease-out';
        }
      });
      
      // Toggle language dropdown on button click
      languageBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        languageDropdown.classList.toggle('hidden');
        notificationDropdown.classList.add('hidden'); // Close notification dropdown
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!notificationContainer.contains(e.target)) {
          notificationDropdown.classList.add('hidden');
        }
        if (!languageContainer.contains(e.target)) {
          languageDropdown.classList.add('hidden');
        }
      });
      
      // Close dropdown on Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          notificationDropdown.classList.add('hidden');
          languageDropdown.classList.add('hidden');
          closeMobileSidebar();
        }
      });
      
      // Prevent dropdown from closing when clicking inside it
      notificationDropdown.addEventListener('click', function(e) {
        e.stopPropagation();
      });
      
      languageDropdown.addEventListener('click', function(e) {
        e.stopPropagation();
      });
      
      // Close mobile sidebar when clicking nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', closeMobileSidebar);
      });
    });
  </script>
</body>
</html>
